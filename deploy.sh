#!/bin/bash

# ะกะบัะธะฟั ะดะปั ะทะฑััะบะธ ัะฐ ะทะฐะฟััะบั ัะตัะฒััั ัะตััะธััะบะฐััะฒ

set -e

echo "๐ง ะะฑััะบะฐ ัะตัะฒััั ัะตััะธััะบะฐััะฒ..."

# ะะตัะตะฒััััะผะพ, ัะธ ััะฝัั docker-compose
if ! command -v docker-compose &> /dev/null; then
    echo "โ Docker Compose ะฝะต ะทะฝะฐะนะดะตะฝะพ. ะัะดั ะปะฐัะบะฐ, ะฒััะฐะฝะพะฒััั Docker Compose."
    exit 1
fi

# ะัะฟะธะฝััะผะพ ััะฐัั ะบะพะฝัะตะนะฝะตัะธ
echo "๐ ะัะฟะธะฝะบะฐ ััะฐัะธั ะบะพะฝัะตะนะฝะตััะฒ..."
docker-compose down

# ะะฑะธัะฐัะผะพ ะพะฑัะฐะทะธ
echo "๐๏ธ  ะะฑััะบะฐ ะพะฑัะฐะทัะฒ..."
docker-compose build --no-cache

# ะะฐะฟััะบะฐัะผะพ ัะตัะฒััะธ
echo "๐ ะะฐะฟััะบ ัะตัะฒัััะฒ..."
docker-compose up -d

# ะะธะฒะพะดะธะผะพ ััะฐััั
echo "๐ ะกัะฐััั ัะตัะฒัััะฒ:"
docker-compose ps

echo ""
echo "โ ะกะตัะฒัั ััะฟััะฝะพ ะทะฐะฟััะตะฝะพ!"
echo "๐ Frontend: http://localhost:3000"
echo "๐ Backend API: http://localhost:3001"
echo ""
echo "๐ ะะปั ะฟะตัะตะณะปัะดั ะปะพะณัะฒ: docker-compose logs -f"
echo "๐ ะะปั ะทัะฟะธะฝะบะธ: docker-compose down"
